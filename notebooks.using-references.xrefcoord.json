{"version":2,"kind":"Notebook","sha256":"6c1f083a46fb4ffe39a90ee4f5fa9892c015ae32cab6021f22fdefcf988e187b","slug":"notebooks.using-references.xrefcoord","location":"/notebooks/using_references/Xrefcoord.ipynb","dependencies":[],"frontmatter":{"title":"Use xrefcoord to Generate Coordinates","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"authors":[{"nameParsed":{"literal":"Norland Raphael Hagen","given":"Norland Raphael","family":"Hagen"},"name":"Norland Raphael Hagen","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/projectpythia/kerchunk-cookbook","copyright":"2024","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/kerchunk-cookbook/blob/main/notebooks/using_references/Xrefcoord.ipynb","exports":[{"format":"ipynb","filename":"Xrefcoord.ipynb","url":"/kerchunk-cookbook/build/Xrefcoord-ff526215de65b18ee7d2ab4147d3181e.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oKV5T06Mbc"},{"type":"inlineCode","value":"xrefcoord","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OmIgp03xDj"},{"type":"text","value":" to Generate Coordinates","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YDiYDQuz8u"}],"identifier":"use-xrefcoord-to-generate-coordinates","label":"Use xrefcoord to Generate Coordinates","html_id":"use-xrefcoord-to-generate-coordinates","implicit":true,"key":"BdT0QLFwzS"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"When using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hnWJvBaFnM"},{"type":"inlineCode","value":"Kerchunk","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EADtsHXji8"},{"type":"text","value":" to generate reference datasets for GeoTIFFâ€™s, only the dimensions are preserved. ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xKUMu5b3bP"},{"type":"inlineCode","value":"xrefcoord","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KbPLF9gQjm"},{"type":"text","value":" is a small utility that allows us to generate coordinates for these reference datasets using the geospatial metadata. Similar to other accessor add-on libraries for ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"puqYtrlgyV"},{"type":"inlineCode","value":"Xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pHvSR6Bekj"},{"type":"text","value":" such as ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gXOCnScLbB"},{"type":"inlineCode","value":"rioxarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"teJrVBRAB3"},{"type":"text","value":" and ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yXtKU8YAqv"},{"type":"inlineCode","value":"xwrf","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mMqTvaPpeZ"},{"type":"text","value":", ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sTxm4xUwix"},{"type":"inlineCode","value":"xrefcord","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xmBXFuFkbP"},{"type":"text","value":" provides an accessor for an ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zEWkZOlJch"},{"type":"inlineCode","value":"Xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ndPo8dLbcr"},{"type":"text","value":" dataset. Importing ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZoqwlfTT9K"},{"type":"inlineCode","value":"xrefcoord","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LC0ui5QFAG"},{"type":"text","value":" allows us to use the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"D1KFgAdDak"},{"type":"inlineCode","value":".xref","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LEA90Dj1CJ"},{"type":"text","value":" accessor to access additional methods.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QkBmRyMOFK"}],"key":"D0IXt4EW2r"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In this tutorial we will use the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YquXnodOxm"},{"type":"inlineCode","value":"generate_coords","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"aEwV88Qi0j"},{"type":"text","value":" method to build coordinates for the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dkbBnjnrRG"},{"type":"inlineCode","value":"Xarray","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"L6X9246pUm"},{"type":"text","value":" dataset. ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hARc5J0WY7"},{"type":"inlineCode","value":"xrefcoord","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OND7cxfKDD"},{"type":"text","value":" is ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ELDAE0QMdz"},{"type":"emphasis","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"very experimental","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kmelwcvMIJ"}],"key":"tbeAzPXRe5"},{"type":"text","value":" and makes assumptions about the underlying data, such as each variable shares the same dimensions etc. Use with caution!","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pMgpEHkx8g"}],"key":"BzgZmAjRjh"}],"key":"yBEr5Sf0bc"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zyt3chLdhQ"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"kqH3OW67Z1"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Within this notebook, we will cover:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rnAJSFBqR7"}],"key":"QqL5LkOjrP"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"How to load a Kerchunk reference dataset created from a collection of GeoTIFFs","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"m8AxP4oBph"}],"key":"iN4HIywRwj"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"How to use ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QNLtieh0Bf"},{"type":"inlineCode","value":"xrefcoord","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ed1pRt5WLp"},{"type":"text","value":" to generate coordinates from a GeoTIFF reference dataset","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"krBpdFdc0x"}],"key":"NBAkeCstCV"}],"key":"xoh6AovB7e"},{"type":"heading","depth":1,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"O2s2V9Metr"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"PZK7xrX0fN"},{"type":"table","position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"rWWrwlrdW7"}],"key":"upabT3PQwW"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"MA6HupQ7jJ"}],"key":"HiDoDynhSO"},{"type":"tableCell","header":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"U2ZCOSeiHc"}],"key":"I4thVMDH9d"}],"key":"Qaexx6O6pL"},{"type":"tableRow","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"link","url":"../foundations/kerchunk_basics","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Kerchunk Basics","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"VuafizcmJl"}],"urlSource":"../foundations/kerchunk_basics","key":"fdfzlNY5iv"}],"key":"EUSsyNBHXJ"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"l9y55O7rbr"}],"key":"c9jM5Cs2pI"},{"type":"tableCell","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Core","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"C0ETvVAiUO"}],"key":"Ub7GZuwPKk"}],"key":"rQV6btyAyu"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"https://tutorial.xarray.dev/intro.html","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Xarray Tutorial","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Og1LLLGdqi"}],"urlSource":"https://tutorial.xarray.dev/intro.html","key":"GcNSYouKGH"}],"key":"xGp0pkbcPY"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Required","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"pPfdVyyP0f"}],"key":"xpIMKZbLtC"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Core","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"nqon1uUpx5"}],"key":"xIiaVEkxTB"}],"key":"bGy9cPGEQX"}],"key":"MLQxHAqWkh"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"XkoKto0hWI"}],"key":"nqbHIfEiqc"},{"type":"text","value":": 45 minutes","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"smMLe55MBP"}],"key":"MkNqBRRSXk"}],"key":"JsdGbfNCz9"},{"type":"thematicBreak","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"ce2YLlvZt1"}],"key":"bVYRJWKsHZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport xrefcoord  # noqa\n\nstorage_options = {\n    \"remote_protocol\": \"s3\",\n    \"skip_instance_cache\": True,\n    \"remote_options\": {\"anon\": True}\n}  # options passed to fsspec\nopen_dataset_options = {\"chunks\": {}}  # opens passed to xarray\n\nds = xr.open_dataset(\n    \"references/RADAR.json\",\n    engine=\"kerchunk\",\n    storage_options=storage_options,\n    open_dataset_options=open_dataset_options,\n)","key":"W4C6U711pM"},{"type":"output","id":"SC7OUEYeDAQVy7KrElWFr","data":[{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mTypeError\u001b[39m                                 Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[1]\u001b[39m\u001b[32m, line 11\u001b[39m\n\u001b[32m      4\u001b[39m storage_options = {\n\u001b[32m      5\u001b[39m     \u001b[33m\"\u001b[39m\u001b[33mremote_protocol\u001b[39m\u001b[33m\"\u001b[39m: \u001b[33m\"\u001b[39m\u001b[33ms3\u001b[39m\u001b[33m\"\u001b[39m,\n\u001b[32m      6\u001b[39m     \u001b[33m\"\u001b[39m\u001b[33mskip_instance_cache\u001b[39m\u001b[33m\"\u001b[39m: \u001b[38;5;28;01mTrue\u001b[39;00m,\n\u001b[32m      7\u001b[39m     \u001b[33m\"\u001b[39m\u001b[33mremote_options\u001b[39m\u001b[33m\"\u001b[39m: {\u001b[33m\"\u001b[39m\u001b[33manon\u001b[39m\u001b[33m\"\u001b[39m: \u001b[38;5;28;01mTrue\u001b[39;00m}\n\u001b[32m      8\u001b[39m }  \u001b[38;5;66;03m# options passed to fsspec\u001b[39;00m\n\u001b[32m      9\u001b[39m open_dataset_options = {\u001b[33m\"\u001b[39m\u001b[33mchunks\u001b[39m\u001b[33m\"\u001b[39m: {}}  \u001b[38;5;66;03m# opens passed to xarray\u001b[39;00m\n\u001b[32m---> \u001b[39m\u001b[32m11\u001b[39m ds = \u001b[43mxr\u001b[49m\u001b[43m.\u001b[49m\u001b[43mopen_dataset\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m     12\u001b[39m \u001b[43m    \u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43mreferences/RADAR.json\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m     13\u001b[39m \u001b[43m    \u001b[49m\u001b[43mengine\u001b[49m\u001b[43m=\u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43mkerchunk\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m,\u001b[49m\n\u001b[32m     14\u001b[39m \u001b[43m    \u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m=\u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     15\u001b[39m \u001b[43m    \u001b[49m\u001b[43mopen_dataset_options\u001b[49m\u001b[43m=\u001b[49m\u001b[43mopen_dataset_options\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     16\u001b[39m \u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/kerchunk-cookbook/lib/python3.13/site-packages/xarray/backends/api.py:715\u001b[39m, in \u001b[36mopen_dataset\u001b[39m\u001b[34m(filename_or_obj, engine, chunks, cache, decode_cf, mask_and_scale, decode_times, decode_timedelta, use_cftime, concat_characters, decode_coords, drop_variables, create_default_indexes, inline_array, chunked_array_type, from_array_kwargs, backend_kwargs, **kwargs)\u001b[39m\n\u001b[32m    703\u001b[39m decoders = _resolve_decoders_kwargs(\n\u001b[32m    704\u001b[39m     decode_cf,\n\u001b[32m    705\u001b[39m     open_backend_dataset_parameters=backend.open_dataset_parameters,\n\u001b[32m   (...)\u001b[39m\u001b[32m    711\u001b[39m     decode_coords=decode_coords,\n\u001b[32m    712\u001b[39m )\n\u001b[32m    714\u001b[39m overwrite_encoded_chunks = kwargs.pop(\u001b[33m\"\u001b[39m\u001b[33moverwrite_encoded_chunks\u001b[39m\u001b[33m\"\u001b[39m, \u001b[38;5;28;01mNone\u001b[39;00m)\n\u001b[32m--> \u001b[39m\u001b[32m715\u001b[39m backend_ds = \u001b[43mbackend\u001b[49m\u001b[43m.\u001b[49m\u001b[43mopen_dataset\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m    716\u001b[39m \u001b[43m    \u001b[49m\u001b[43mfilename_or_obj\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    717\u001b[39m \u001b[43m    \u001b[49m\u001b[43mdrop_variables\u001b[49m\u001b[43m=\u001b[49m\u001b[43mdrop_variables\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    718\u001b[39m \u001b[43m    \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mdecoders\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    719\u001b[39m \u001b[43m    \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mkwargs\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m    720\u001b[39m \u001b[43m\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m    721\u001b[39m ds = _dataset_from_backend_dataset(\n\u001b[32m    722\u001b[39m     backend_ds,\n\u001b[32m    723\u001b[39m     filename_or_obj,\n\u001b[32m   (...)\u001b[39m\u001b[32m    734\u001b[39m     **kwargs,\n\u001b[32m    735\u001b[39m )\n\u001b[32m    736\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m ds\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/kerchunk-cookbook/lib/python3.13/site-packages/kerchunk/xarray_backend.py:13\u001b[39m, in \u001b[36mKerchunkBackend.open_dataset\u001b[39m\u001b[34m(self, filename_or_obj, storage_options, open_dataset_options, **kw)\u001b[39m\n\u001b[32m      9\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mopen_dataset\u001b[39m(\n\u001b[32m     10\u001b[39m     \u001b[38;5;28mself\u001b[39m, filename_or_obj, *, storage_options=\u001b[38;5;28;01mNone\u001b[39;00m, open_dataset_options=\u001b[38;5;28;01mNone\u001b[39;00m, **kw\n\u001b[32m     11\u001b[39m ):\n\u001b[32m     12\u001b[39m     open_dataset_options = (open_dataset_options \u001b[38;5;129;01mor\u001b[39;00m {}) | kw\n\u001b[32m---> \u001b[39m\u001b[32m13\u001b[39m     ref_ds = \u001b[43mopen_reference_dataset\u001b[49m\u001b[43m(\u001b[49m\n\u001b[32m     14\u001b[39m \u001b[43m        \u001b[49m\u001b[43mfilename_or_obj\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     15\u001b[39m \u001b[43m        \u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m=\u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     16\u001b[39m \u001b[43m        \u001b[49m\u001b[43mopen_dataset_options\u001b[49m\u001b[43m=\u001b[49m\u001b[43mopen_dataset_options\u001b[49m\u001b[43m,\u001b[49m\n\u001b[32m     17\u001b[39m \u001b[43m    \u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m     18\u001b[39m     \u001b[38;5;28;01mreturn\u001b[39;00m ref_ds\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/kerchunk-cookbook/lib/python3.13/site-packages/kerchunk/xarray_backend.py:45\u001b[39m, in \u001b[36mopen_reference_dataset\u001b[39m\u001b[34m(filename_or_obj, storage_options, open_dataset_options)\u001b[39m\n\u001b[32m     42\u001b[39m \u001b[38;5;28;01mif\u001b[39;00m open_dataset_options \u001b[38;5;129;01mis\u001b[39;00m \u001b[38;5;28;01mNone\u001b[39;00m:\n\u001b[32m     43\u001b[39m     open_dataset_options = {}\n\u001b[32m---> \u001b[39m\u001b[32m45\u001b[39m store = \u001b[43mrefs_as_store\u001b[49m\u001b[43m(\u001b[49m\u001b[43mfilename_or_obj\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[43m*\u001b[49m\u001b[43m*\u001b[49m\u001b[43mstorage_options\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m     47\u001b[39m \u001b[38;5;28;01mreturn\u001b[39;00m xr.open_zarr(\n\u001b[32m     48\u001b[39m     store, zarr_format=\u001b[32m2\u001b[39m, consolidated=\u001b[38;5;28;01mFalse\u001b[39;00m, **open_dataset_options\n\u001b[32m     49\u001b[39m )\n\n\u001b[31mTypeError\u001b[39m: refs_as_store() got an unexpected keyword argument 'skip_instance_cache'","ename":"TypeError","evalue":"refs_as_store() got an unexpected keyword argument 'skip_instance_cache'"}],"key":"Qg2R4S3w7T"}],"key":"rj8xxhJKLq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Generate coordinates from reference dataset\nref_ds = ds.xref.generate_coords(time_dim_name=\"time\", x_dim_name=\"X\", y_dim_name=\"Y\")\n# Rename to rain accumulation in 24 hour period\nref_ds = ref_ds.rename({\"0\": \"rr24h\"})","key":"GDL6bW4RqF"},{"type":"output","id":"v8RW1gB7TbqZHSeA0CIQL","data":[],"key":"h6eFXU96Sl"}],"key":"r5a1zWcKVY"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create a Map","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BEAnrfgaUg"}],"identifier":"create-a-map","label":"Create a Map","html_id":"create-a-map","implicit":true,"key":"mnQRcv5iK6"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Here we are using ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"u3WTswALVV"},{"type":"inlineCode","value":"Xarray","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xPvynDBxVA"},{"type":"text","value":" to select a single time slice and create a map of 24 hour accumulated rainfall.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OuZeDJSjB7"}],"key":"IxMtoO4gig"}],"key":"SWITNVZR9R"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ref_ds[\"rr24h\"].where(ref_ds.rr24h < 60000).isel(time=0).plot(robust=True)","key":"A6CtPHdczz"},{"type":"output","id":"zb-rvMgmEGdkkyw7_Fe0d","data":[],"key":"uwkylAZPdx"}],"key":"IQ5ILCRjPI"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create a Time-Series","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sxsGKFdkYJ"}],"identifier":"create-a-time-series","label":"Create a Time-Series","html_id":"create-a-time-series","implicit":true,"key":"OiImSUDjdt"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Next we are plotting accumulated rain as a function of time for a specific point.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IhYwxDxsfI"}],"key":"eGsmYCuWAf"}],"key":"PKLSKdDNxa"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ref_ds[\"rr24h\"][:, 700, 700].plot()","key":"EWL8NoFRd1"},{"type":"output","id":"_Tp4YgkRbNu-SxG4UacHB","data":[],"key":"DOIgDdvGRq"}],"key":"Ao7rnZVjv3"}],"key":"zvXR222kSi"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Load Kerchunked dataset with Xarray","url":"/notebooks/using-references/xarray","group":"Using Pre-Generated References"},"next":{"title":"Kerchunk and Xarray-Datatree","url":"/notebooks/using-references/datatree","group":"Using Pre-Generated References"}}},"domain":"http://localhost:3000"}